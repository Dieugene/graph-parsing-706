# Стратегия тестирования

## Принцип: реальные данные как можно раньше

Моки создают иллюзию работоспособности. Чем дольше код работает на моках, тем больше скрытых проблем при переходе к реальности.

## Алгоритм выбора

**1. Спроси пользователя:**
> Можно ли сразу тестировать на реальных данных/запросах?

**2. Если да:**
- Реальные файлы → `03_data/test_samples/`
- API-ключи → `.env`
- Тесты сразу на реальных данных

**3. Если пользователь сказал использовать моки:**
- Используй моки
- **Обязательно:** веди список моков в implementation.md
- Формат: `[МОК] module.py:function — описание что мокируется`

## Список моков

При использовании моков Developer фиксирует в `implementation_NN.md`:

```markdown
## Моки для замены

- [ ] `clients/vlm.py:call_api` — мок ответа Gemini
- [ ] `core/state.py:save` — in-memory вместо диска
```

Reviewer проверяет наличие списка. Tech Lead использует при приёмке.

## Роли

| Роль | Ответственность |
|------|-----------------|
| Tech Lead | Определяет стратегию в task_brief, спрашивает пользователя |
| Analyst | Конкретизирует в analysis: что мокируется, что реально |
| Developer | Реализует, ведёт список моков |
| Reviewer | Проверяет наличие списка, корректность моков |
